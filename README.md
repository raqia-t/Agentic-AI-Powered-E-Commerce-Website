# ğŸ›’ HappyCart â€“ AI-Powered E-Commerce Assistant

HappyCart is an AI-powered e-commerce platform that integrates product search, customer support, order management, and cart management.It combines FAISS embeddings, 
PostgreSQL, and LangGraph orchestration to deliver a seamless intelligent shopping experience.

---

## ğŸ”§ Features

- ğŸ“¦ Product Search Agent â†’ Search products using semantic embeddings (FAISS) and Postgresql database.
- ğŸ™‹ Customer Support Agent â†’ FAQ + policy-based support using embeddings.
- ğŸšš Order Agent â†’ Track, cancel, and confirm orders from JSON dataset.
- ğŸ›’ Cart Agent â†’ Add/remove/view items with a PostgreSQL database backend.
- ğŸ¤– LangGraph Orchestration â†’ Smart intent detection and workflow routing.
- âš¡ FastAPI Backend â†’ /chat endpoint for frontend communication.
- ğŸ’» Next.js Frontend â†’ Clean and modern shopping interface.
- ğŸ§  LLM Generation (Ollama -> LLaMA3) â†’ Natural, human-like responses.

---

## ğŸ—‚ï¸ Project Structure
<pre> <code>``` happycart/
  â”œâ”€â”€ backend/
  â”‚   â”œâ”€â”€ data.py                  # Convert products.xlsx â†’ products.json
  â”‚   â”œâ”€â”€ embeddings_and_db.py     # Generate embeddings + setup PostgreSQL tables
  â”‚   â”œâ”€â”€ product_search.py        # Product search agent
  â”‚   â”œâ”€â”€ customer_support.py      # Customer support agent (FAQ + policies)
  â”‚   â”œâ”€â”€ order_agent.py           # Order tracking, cancellation, confirmation
  â”‚   â”œâ”€â”€ cart_agent.py            # PostgreSQL-backed cart agent
  â”‚   â”œâ”€â”€ agents_run.py            # LangGraph workflow orchestrating all agents
  â”‚   â”œâ”€â”€ main.py                  # FastAPI backend (chat API)
  â”‚   â”œâ”€â”€ products.xlsx            # Raw product data (Excel)
  â”‚   â”œâ”€â”€ products.json            # Cleaned product dataset (generated by data.py)
  â”‚   â”œâ”€â”€ faqs_and_policies.csv    # FAQs and policies dataset
  â”‚   â”œâ”€â”€ sample_orders.json       # Example orders dataset
  â”‚   â””â”€â”€ embeddings/              # Stores FAISS index + ID mapping
  â”‚
  â”œâ”€â”€ frontend/                    # Next.js frontend
  â”‚   â”œâ”€â”€ happycart-frontend       # frontend folder
  â”‚   â””â”€â”€ ...
  â”‚
  â”œâ”€â”€ env/
  â”‚   â””â”€â”€ requirements.txt         # Python dependencies
  â”‚
  â””â”€â”€ README.md                    # Project documentation ```</code> </pre>

  ---

## âš™ï¸ Installation & Setup

1ï¸âƒ£ Create Virtual Environment

<pre> <code>``` python -m venv venv
venv\Scripts\activate  # Windows ```</code> </pre>

---

ğŸ”¹ Install Python Dependencies

<pre> <code>``` pip install -r env/requirements.txt ```</code> </pre>

---

ğŸ›¢ï¸ 2. PostgreSQL Setup

ğŸš¨ The database itself is not auto-created. You must create it manually before running the scripts.

Install PostgreSQL 

Download From: https://www.postgresql.org/download/windows/?utm_source

2. Open PostgreSQL Shell
   
<pre> <code>```  psql -U postgres  ```</code> </pre>
(Default superuser is postgres)

3. Run Setup Commands

Inside the PostgreSQL shell, execute:

<pre> <code>``` -- Create database
CREATE DATABASE happycart;

-- Create user with password
CREATE USER happyuser WITH PASSWORD 'happypass';

-- Grant privileges
GRANT ALL PRIVILEGES ON DATABASE happycart TO happyuser;

-- Switch to happycart DB
\c happycart

-- Schema & table privileges
GRANT ALL ON SCHEMA public TO happyuser;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO happyuser;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO happyuser;

-- Default privileges for future tables
ALTER DEFAULT PRIVILEGES IN SCHEMA public
GRANT ALL PRIVILEGES ON TABLES TO happyuser;

ALTER DEFAULT PRIVILEGES IN SCHEMA public
GRANT ALL PRIVILEGES ON SEQUENCES TO happyuser;  ```</code> </pre>

4. Verify Connection

Exit psql and test the connection:

<pre> <code>``` psql -U happyuser -d happycart ```</code> </pre>

If successful â†’ âœ… database is ready for your backend.

Database credentials are already configured in code:

<pre> <code>``` DB_CONFIG = {
    "dbname": "happycart",
    "user": "happyuser",
    "password": "happypass",
    "host": "localhost",
    "port": "5432"
} ```</code> </pre>

---

## ğŸ” Generate Embeddings & Setup Database

- From Backend Folder Download all the files and place it in root folder

ğŸ“ 1. Convert Excel â†’ JSON (Products Data)

If you update your products.xlsx file, run:
<pre> <code>``` python data.py ```</code> </pre>


âœ… This will generate products.json, which is then used in embeddings and database setup.

ğŸ” 2. Generate Embeddings & Setup Database

Run the following script:
<pre> <code>``` python embeddings_and_db.py ```</code> </pre>


âœ… This will:
- Generate FAISS embeddings from products.json + faqs_and_policies.csv
- Save index in embeddings/
- Create products and cart_items tables in PostgreSQL
- Insert product data into the database

---

## ğŸš€ Run the Backend (FastAPI)

Start the API server and run the script:
<pre> <code>``` uvicorn main:app --reload --port 8000 ```</code> </pre>

---

## ğŸŒ Run the Frontend (Next.js)

- Open another cmd and activate the env
- Go to frontend folder: 
<pre> <code>```  cd frontend
npm install
npm run dev ```</code> </pre>

The frontend runs at:
<pre> <code>``` http://localhost:3000 ```</code> </pre>

---

## ğŸ¤– LLM Integration (Ollama + LLaMA 3)

Install Ollama
Then pull the LLaMA 3 model:

<pre> <code>`` ollama pull llama3 ```</code> </pre>

Test model:

<pre> <code>`` ollama run llama3 "Hello!"  ```</code> </pre>

---

## ğŸ§© Usage Flow

- Product Search â†’ Type queries like "show me running shoes"
- Cart Management â†’ Add/remove/view items with buttons on the frontend
- Order Tracking â†’ Check status with "track order ORD101" (Check the Order numbers from the sample_orders.json file)
- Customer Support â†’ Ask policy/FAQ questions

---

## ğŸ“ Notes

- If PostgreSQL database isnâ€™t created â†’ script will fail to connect.
- Modify DB_CONFIG in embeddings_and_db.py and cart_agent.py if using custom DB/user.
- Ollama must be running in background for LLM responses.





