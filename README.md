# 🛒 HappyCart – AI-Powered E-Commerce Assistant

HappyCart is an AI-powered e-commerce platform that integrates product search, customer support, order management, and cart management.It combines FAISS embeddings, 
PostgreSQL, and LangGraph orchestration to deliver a seamless intelligent shopping experience.

---

## 🔧 Features

- 📦 Product Search Agent → Search products using semantic embeddings (FAISS) and Postgresql database.
- 🙋 Customer Support Agent → FAQ + policy-based support using embeddings.
- 🚚 Order Agent → Track, cancel, and confirm orders from JSON dataset.
- 🛒 Cart Agent → Add/remove/view items with a PostgreSQL database backend.
- 🤖 LangGraph Orchestration → Smart intent detection and workflow routing.
- ⚡ FastAPI Backend → /chat endpoint for frontend communication.
- 💻 Next.js Frontend → Clean and modern shopping interface.
- 🧠 LLM Generation (Ollama -> LLaMA3) → Natural, human-like responses.

---

## 🗂️ Project Structure
<pre> <code>``` happycart/
  ├── backend/
  │   ├── data.py                  # Convert products.xlsx → products.json
  │   ├── embeddings_and_db.py     # Generate embeddings + setup PostgreSQL tables
  │   ├── product_search.py        # Product search agent
  │   ├── customer_support.py      # Customer support agent (FAQ + policies)
  │   ├── order_agent.py           # Order tracking, cancellation, confirmation
  │   ├── cart_agent.py            # PostgreSQL-backed cart agent
  │   ├── agents_run.py            # LangGraph workflow orchestrating all agents
  │   ├── main.py                  # FastAPI backend (chat API)
  │   ├── products.xlsx            # Raw product data (Excel)
  │   ├── products.json            # Cleaned product dataset (generated by data.py)
  │   ├── faqs_and_policies.csv    # FAQs and policies dataset
  │   ├── sample_orders.json       # Example orders dataset
  │   └── embeddings/              # Stores FAISS index + ID mapping
  │
  ├── frontend/                    # Next.js frontend
  │   ├── happycart-frontend       # frontend folder
  │   └── ...
  │
  ├── env/
  │   └── requirements.txt         # Python dependencies
  │
  └── README.md                    # Project documentation ```</code> </pre>

  ---

## ⚙️ Installation & Setup

1️⃣ Create Virtual Environment

<pre> <code>``` python -m venv venv
venv\Scripts\activate  # Windows ```</code> </pre>

---

🔹 Install Python Dependencies

<pre> <code>``` pip install -r env/requirements.txt ```</code> </pre>

---

🛢️ 2. PostgreSQL Setup

🚨 The database itself is not auto-created. You must create it manually before running the scripts.

Install PostgreSQL 

Download From: https://www.postgresql.org/download/windows/?utm_source

2. Open PostgreSQL Shell
   
<pre> <code>```  psql -U postgres  ```</code> </pre>
(Default superuser is postgres)

3. Run Setup Commands

Inside the PostgreSQL shell, execute:

<pre> <code>``` -- Create database
CREATE DATABASE happycart;

-- Create user with password
CREATE USER happyuser WITH PASSWORD 'happypass';

-- Grant privileges
GRANT ALL PRIVILEGES ON DATABASE happycart TO happyuser;

-- Switch to happycart DB
\c happycart

-- Schema & table privileges
GRANT ALL ON SCHEMA public TO happyuser;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO happyuser;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO happyuser;

-- Default privileges for future tables
ALTER DEFAULT PRIVILEGES IN SCHEMA public
GRANT ALL PRIVILEGES ON TABLES TO happyuser;

ALTER DEFAULT PRIVILEGES IN SCHEMA public
GRANT ALL PRIVILEGES ON SEQUENCES TO happyuser;  ```</code> </pre>

4. Verify Connection

Exit psql and test the connection:

<pre> <code>``` psql -U happyuser -d happycart ```</code> </pre>

If successful → ✅ database is ready for your backend.

Database credentials are already configured in code:

<pre> <code>``` DB_CONFIG = {
    "dbname": "happycart",
    "user": "happyuser",
    "password": "happypass",
    "host": "localhost",
    "port": "5432"
} ```</code> </pre>

---

## 🔎 Generate Embeddings & Setup Database

- From Backend Folder Download all the files and place it in root folder

📝 1. Convert Excel → JSON (Products Data)

If you update your products.xlsx file, run:
<pre> <code>``` python data.py ```</code> </pre>


✅ This will generate products.json, which is then used in embeddings and database setup.

🔎 2. Generate Embeddings & Setup Database

Run the following script:
<pre> <code>``` python embeddings_and_db.py ```</code> </pre>


✅ This will:
- Generate FAISS embeddings from products.json + faqs_and_policies.csv
- Save index in embeddings/
- Create products and cart_items tables in PostgreSQL
- Insert product data into the database

---

## 🚀 Run the Backend (FastAPI)

Start the API server and run the script:
<pre> <code>``` uvicorn main:app --reload --port 8000 ```</code> </pre>

---

## 🌐 Run the Frontend (Next.js)

- Open another cmd and activate the env
- Go to frontend folder: 
<pre> <code>```  cd frontend
npm install
npm run dev ```</code> </pre>

The frontend runs at:
<pre> <code>``` http://localhost:3000 ```</code> </pre>

---

## 🤖 LLM Integration (Ollama + LLaMA 3)

Install Ollama
Then pull the LLaMA 3 model:

<pre> <code>`` ollama pull llama3 ```</code> </pre>

Test model:

<pre> <code>`` ollama run llama3 "Hello!"  ```</code> </pre>

---

## 🧩 Usage Flow

- Product Search → Type queries like "show me running shoes"
- Cart Management → Add/remove/view items with buttons on the frontend
- Order Tracking → Check status with "track order ORD101" (Check the Order numbers from the sample_orders.json file)
- Customer Support → Ask policy/FAQ questions

---

## 📝 Notes

- If PostgreSQL database isn’t created → script will fail to connect.
- Modify DB_CONFIG in embeddings_and_db.py and cart_agent.py if using custom DB/user.
- Ollama must be running in background for LLM responses.





